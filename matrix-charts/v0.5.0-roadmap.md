# Matrix Charts v0.5.0 Release Roadmap

This document outlines the planned work to integrate matrix-stats FormulaEvaluator
into ggplot smoothing and formula handling.

## Summary

v0.5.0 replaces ad-hoc formula parsing in GgStat with the shared FormulaEvaluator,
expands supported formula syntax, and honours smoothing methods like loess and gam.

---

## Priority 1: GgStat Integration (Must Do)

### 1.1 [ ] Replace GgStat.parseFormula with FormulaEvaluator usage
- Delegate formula parsing and term expansion to matrix-stats
- Remove or deprecate local parseFormula once coverage is complete

### 1.2 [ ] Update stat_smooth/geom_smooth parameter mapping
- Map ggplot parameters (method, formula, degree, span, se, level, n)
- Validate conflicting params consistently (formula vs degree)

### 1.3 [ ] Use evaluator output consistently
- Convert evaluator FitResult into smooth output matrix (x, y, ymin, ymax)
- Ensure se bands reflect evaluator outputs for all methods

---

## Priority 2: API and Documentation (Should Do)

### 2.1 [ ] Document supported formula syntax in ggPlot.md
- Add examples for poly(), transforms, and interactions

### 2.2 [ ] Add examples for loess and gam
- Update README and examples folder with new usage patterns

---

## Priority 3: Tests (Must Do)

### 3.1 [ ] Expand GgStatTest coverage
- Formula parsing delegation, interaction terms, transform terms

### 3.2 [ ] Add regression tests for method switching
- geom_smooth(method: 'loess') and geom_smooth(method: 'gam')

### 3.3 [ ] Run matrix-charts tests
- Command: `./gradlew :matrix-charts:test -Pheadless=true`
